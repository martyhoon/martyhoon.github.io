<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Lifecycle of an HTML page | Martyhoon’s record</title>
<meta name="generator" content="Jekyll v4.1.0" />
<meta property="og:title" content="Lifecycle of an HTML page" />
<meta name="author" content="Martyhoon" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Minimal Jekyll theme for storytellers" />
<meta property="og:description" content="Minimal Jekyll theme for storytellers" />
<link rel="canonical" href="http://localhost:4000/study/2020-html-lifecycle/" />
<meta property="og:url" content="http://localhost:4000/study/2020-html-lifecycle/" />
<meta property="og:site_name" content="Martyhoon’s record" />
<script type="application/ld+json">
{"author":{"@type":"Person","name":"Martyhoon"},"url":"http://localhost:4000/study/2020-html-lifecycle/","headline":"Lifecycle of an HTML page","description":"Minimal Jekyll theme for storytellers","@type":"WebPage","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  <!-- CSS -->
  <link rel="stylesheet" href="/assets/main.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Libre+Baskerville:400,400i,700">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />
  <!-- Favicon -->
  <!--
  The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps
  Generated by: https://www.favicon-generator.org/
  v2.0
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2019 Cotes Chung
  Published under the MIT license
-->



<link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon">
<link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon">

<link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png">
<link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png">
<link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png">

<link rel="icon" type="image/png" sizes="192x192"  href="/assets/img/favicons/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png">

<link rel="manifest" href="/assets/img/favicons/manifest.json">
<meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'>
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">


  <!--Google SEO-->
  <meta name="google-site-verification" content="KzoLR-x7Rg-ZZmQO6VxqJFFdU81R0TT2JhRoY9_tMfA" />
  
  <!-- RSS -->
  <link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Martyhoon's record" />

  <!-- Google Analytics-->
  
</head>


  <body>

    <nav class="nav">
  <div class="nav-container">
    <a href="/">
      <h2 class="nav-title"><img id="head_icon" src="/assets/img/sample/think.png"></h2>
    </a>
    <ul>
      <li><a href="/about">About</a></li>
      <li><a href="/">Project</a></li>
      <li><a href="/study">Study</a></li>
      <li><a href="/blog">Blog</a></li>
    </ul>
  </div>
</nav>


    <!-- post header 이미지 넣는 부분-->
    

    <main>
      <div class="post">

  <h1 class="post-title">Lifecycle of an HTML page</h1>
  <p><br /></p>

<p style="font-size : 10px; color : #e9e9e9"> 아래 글은 공부하고 기억하기 위해 남겨놓는 글이다 </p>

<h3 id="-intro">🔶 Intro</h3>

<p>html 페이지의 lifecycle은 3개의 중요한 event를 가지고 있다.</p>

<ul>
  <li><span style="border-bottom : 3px soild #be4e7f8; box-shadow : inset 0 -4px 0 #b4e7f8; font-weight: bold;"> DOMContentLoaded </span> : Browser에서 HTML이 완전히 로드되고 DOM tree가 만들어 질 때 발생하는 이벤트이다.</li>
  <li><span style="border-bottom : 3px soild #be4e7f8; box-shadow : inset 0 -4px 0 #b4e7f8;font-weight: bold;"> load </span> : 문서의 모든 콘텐츠(images,script,css, etc)가 로드된 후 발생하는 이벤트</li>
  <li><span style="border-bottom : 3px soild #be4e7f8; box-shadow : inset 0 -4px 0 #b4e7f8;font-weight: bold;"> beforeunload / unload </span> : 사용자가 페이지를 벗어날 때 일어나는 이벤트</li>
</ul>

<h3 id="-domcontentloaded">🔶 DOMContentLoaded</h3>

<p>위 이벤트는 onload 이벤트보다 먼저 발생한다. 즉, DOM tree가 완성되면 바로 발생하므로 빠른 실행속도가 필요할 때 적합하다. 다음은 DOMContentLoaded를 이벤트를 다루는 방법들이다.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//vanilla js</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">DOMContentLoaded</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span> 
    <span class="c1">//실행될 코드 </span>
 <span class="p">});</span>

<span class="c1">//jQuery</span>
<span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span> 
    <span class="c1">//실행될 코드 </span>
<span class="p">});</span>
</code></pre></div></div>

<h3 id="-load">🔶 load</h3>

<p>위 이벤트는 문서의 모든 콘텐츠가 로드된 후 발생하는 이벤트이다. 이로 인해 불필요한 로딩시간이 추가될 수 있다. 동일한 문서에는 오직 <code class="language-plaintext highlighter-rouge">onload</code>는 하나만 존재해야 한다.</p>

<ul>
  <li>중복될 경우, 마지막 선언이 실행</li>
  <li>외부 라이브러리에서 이미 선언된 경우 이를 찾아 하나로 합치는 과정 필요</li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//방법 1</span>
  <span class="nb">window</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">alert</span><span class="p">(</span><span class="dl">'</span><span class="s1">Page loaded</span><span class="dl">'</span><span class="p">);</span> 
  <span class="p">};</span>

<span class="c1">//방법 2 </span>
  <span class="o">&lt;</span><span class="nx">body</span> <span class="nx">onload</span><span class="o">=</span><span class="dl">"</span><span class="s2">실행될 코드</span><span class="dl">"</span><span class="o">&gt;</span>
</code></pre></div></div>

<h3 id="-beforeunload--unload">🔶 beforeunload / unload</h3>

<h4 id="-beforeunload">➲ beforeunload</h4>

<p>사용자가 해당 페이지를 떠날 때 변경 사항을 저장했는지 확인하고 정말 나가기를 원하는지 물어볼 수 있는 이벤트 <br />
사용자가 페이지를 벗어나 탐색을 시작하거나 창을 닫으려고 한다면 beforeunload 핸들러가 추가 확인을 요청한다.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">window</span><span class="p">.</span><span class="nx">onbeforeunload</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="dl">"</span><span class="s2">변경 사항을 저장하지 않았습니다. 정말 지금 나가시겠습니까?</span><span class="dl">"</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div></div>

<h4 id="-unload">➲ unload</h4>

<p>사용자가 해당 페이지를 떠났지만 통계 전송과 같은 일부 작업을 할 수 있다. 예를 들어 관련 팝업 창을 닫는 것과 같이 지연이 없는 작업을 할 수 있다. 주목할 만한 부분은 분석을 보내는 것이다. 페이지 사용 방식(마우스 클릭, 스크롤 등)에 대한 데이터를 수집한다고 가정할 때 우리는 사용자 우리를 떠날 때 <code class="language-plaintext highlighter-rouge">navigator.sendBeacon(url, data)</code> 메서드를 통해 백그라운드에서 데이터를 보낼 수 있다. 이 때 다른 페이지로의 전환은 지연되지 않는다. 페이지를 떠났지만 여전히 sendBeacon은 실행이 된다. 아래는 그 예시이다.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">analyticsData</span> <span class="o">=</span> <span class="p">{</span> <span class="cm">/* 수집하는 object data */</span> <span class="p">};</span>

<span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">unload</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nb">navigator</span><span class="p">.</span><span class="nx">sendBeacon</span><span class="p">(</span><span class="dl">"</span><span class="s2">/analytics</span><span class="dl">"</span><span class="p">,</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">analyticsData</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div></div>

<h4 id="-tip">✍ Tip</h4>

<p>일반적으로 스크립트를 문서의 마지막 &lt;/body&gt; 이전에 삽입하면 굳이 이벤트를 이용하여 프로그래밍을 처리할 필요가 없다. 하지만</p>

<ul>
  <li>문서의 &lt;head&gt; 영역에 스크립트가 삽입</li>
  <li>외부의 파일에 정의 (ex) product.js …etc</li>
</ul>

<p>위의 2가지 경우 이벤트를 연결하여 문서의 로드시점에 맞게 처리해야 한다. 보통은 그래서 &lt;/body&gt; 이전에 js 문서들을 load 시킨다.</p>

<h5 id="-reference">※ reference</h5>

<ul>
  <li><a href="https://javascript.info/onload-ondomcontentloaded">javascript.info</a></li>
  <li><a href="https://webdir.tistory.com/515">webdir</a></li>
</ul>

</div>





<!--
<div class="pagination">
  
  
</div>
-->
    </main>

    <footer>
  <div class ="wrapper">
    
   <div class ="footer_title"> Hoon 블로그 | <a href="https://github.com/martyhoon">
    <i style="color:white" class="fab fa-github fa-1x"></i>
  </a>

   </div>
   <div class = "footer_email">didgnsah7320@gmail.com</div>

   <span> &copy; <time datetime="2020-08-27 01:58:06 +0900">2020</time> Martyhoon</span>
  </div>
</footer>




  </body>
</html>
